## 13.PageView 轮播图滑动

### 13.1 基本使用

```dart
import 'package:flutter/material.dart';

class MyPageView extends StatefulWidget {
  const MyPageView({Key? key}) : super(key: key);

  @override
  _MyPageViewState createState() => _MyPageViewState();
}

class _MyPageViewState extends State<MyPageView> {
  List<Widget> _pages = [];

  List<Widget> getPages() {
    List<Widget> list = [];
    for (var i = 0; i < 20; i++) {
      list.add(Center(
        child: Text("第$i页"),
      ));
    }
    return list;
  }

  @override
  void initState() {
    super.initState();
    setState(() {
      _pages = getPages();
    });
  }

  _pageViewChildren() {
    return Scaffold(
      body: PageView(
        // scrollDirection: Axis.vertical,
        children: _pages,
      ),
    );
  }

  _pageViewBuilder() {
    return Scaffold(
      body: PageView.builder(
          itemCount: _pages.length,
          itemBuilder: (context, i) {
            return Center(
              child: Text("第$i页"),
            );
          }),
    );
  }

  @override
  Widget build(BuildContext context) {
    return _pageViewBuilder();
  }
}
```

### 13.2 上拉无限加载

```dart
/*
 * @param PageView 上拉无限加载
 * @Author: gdj
 * @Date: 2024-11-18 15:41:24
 */
import 'package:flutter/material.dart';

class MyPageViewInfiniteLoading extends StatefulWidget {
  const MyPageViewInfiniteLoading({Key? key}) : super(key: key);

  @override
  _MyPageViewInfiniteLoadingState createState() =>
      _MyPageViewInfiniteLoadingState();
}

class _MyPageViewInfiniteLoadingState extends State<MyPageViewInfiniteLoading> {
  List<Widget> _pages = [];
  final int limit = 10;
  int index = 1;

  initPages() {
    List<Widget> list = [];
    for (var i = _pages.length; i < index * limit; i++) {
      list.add(Center(
        child: Text(
          "第$i页",
          style: TextStyle(fontSize: 50),
        ),
      ));
    }
    index++;
    setState(() {
      _pages = [..._pages, ...list];
    });
  }

  @override
  void initState() {
    super.initState();
    initPages();
  }

  _renderInfiniteLoading() {
    return Scaffold(
      body: PageView.builder(
          scrollDirection: Axis.vertical,
          itemCount: _pages.length,
          onPageChanged: (v) {
            if (v + 2 == _pages.length) {
              initPages();
            }
          },
          itemBuilder: (context, i) {
            return Center(
              child: Text(
                "第$i页",
                style: TextStyle(fontSize: 50),
              ),
            );
          }),
    );
  }

  @override
  Widget build(BuildContext context) {
    return Container(
      child: _renderInfiniteLoading(),
    );
  }
}
```