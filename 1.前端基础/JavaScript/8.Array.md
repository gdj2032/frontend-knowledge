# 数组

Array 对象支持在单个变量名下存储多个元素，并具有执行常见数组操作的成员。

在 JavaScript 中，数组不是基本类型，而是具有以下核心特征的 Array 对象：

- JavaScript 数组是可调整大小的，并且可以包含不同的数据类型。（当不需要这些特征时，可以使用类型化数组。）
- JavaScript 数组不是关联数组，因此，不能使用任意字符串作为索引访问数组元素，但必须使用非负整数（或它们各自的字符串形式）作为索引访问。
- JavaScript 数组的索引从 0 开始：数组的第一个元素在索引 0 处，第二个在索引 1 处，以此类推，最后一个元素是数组的 length 属性减去 1 的值。
- JavaScript 数组复制操作创建浅拷贝。（所有 JavaScript 对象的标准内置复制操作都会创建浅拷贝，而不是深拷贝）。

## 稀疏数组与密集数组

>稀疏数组： 索引不连续，数组长度大于元素个数的数组, 可以简单理解为有 empty 的数组；
>
>密集数组： 索引连续, 数组长度等于元素个数的数组；

### 稀疏数组 => 密集数组：

```js
var arr = new Array(5); // 稀疏数组
// ES5
Array.apply(null, arr);
// ES6
Array.form(arr);
[...arr];
```

### 密集数组 => 稀疏数组：

```js
var arr = [1,3,4,5,6]; // 密集数组
arr.length = 10 // [1, 3, 4, 5, 6, empty × 5]
```

通过 `new Array(len)` 的方式创建的数组属于稀疏数组，稀疏数组在一些数组方法中，特别是遍历数组的方法，往往与我们预期的不太一样，如果对其不了解，容易导致问题，而且稀疏数组在创建和访问元素方面性能表现并不好，所以在平时代码中应该`尽量避免使用稀疏数组`。

## 方法

### 1. Array.prototype.at()

at() 方法接收一个整数值并返回该索引对应的元素，允许正数和负数。负整数从数组中的最后一个元素开始倒数。

#### 语法
- at(index)

```js
const arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
console.info({
  'arr.at(1)': arr.at(1),
  'arr.at(-1)': arr.at(-1),
  'arr.at("1")': arr.at('1'),
  'arr.at("-1")': arr.at('-1'),
  'arr.at("a")': arr.at('a'),
  'arr.at("b")': arr.at('b'),
});
// { 2, 12, 2, 12, 1, 1 }
```

### 2. Array.prototype.concat()

concat() 方法用于合并两个或多个数组。此方法不会更改现有数组，而是返回一个新数组。

#### 语法
- concat()
- concat(value0)
- concat(value0, value1)
- concat(value0, value1, /* … ,*/ valueN)

```js
const a = [1, 2, 3]
const b = ['a', 'b', 'c']
const c = [[1]]

const arr1 = a.concat(b)
const arr2 = a.concat(b, c)
const arr3 = a.concat(b, c)
arr3[6].push(2)

console.info({
  arr1,
  arr2,
  arr3,
});
// arr1: [ 1, 2, 3, 'a', 'b', 'c' ],
// arr2: [ 1, 2, 3, 'a', 'b', 'c', [ 1, 2 ] ],
// arr3: [ 1, 2, 3, 'a', 'b', 'c', [ 1, 2 ] ],
```

### 3. Array.prototype.copyWithin()

copyWithin() 方法浅复制数组的一部分到同一数组中的另一个位置，并返回它，不会改变原数组的长度。

#### 语法
- copyWithin(target)
- copyWithin(target, start)
- copyWithin(target, start, end)

target

- 序列开始替换的目标位置，以 0 为起始的下标表示，且将被转换为整数
- 负索引将从数组末尾开始计数——如果 target < 0，则实际是 target + array.length。
- 如果 target < -array.length，则使用 0。
- 如果 target >= array.length，则不会拷贝任何内容。
- 如果 target 位于 start 之后，则复制只会持续到 array.length 结束（换句话说，copyWithin() 永远不会扩展数组）。

start

- 要复制的元素序列的起始位置，以 0 为起始的下标表示，且将被转换为整数

负索引将从数组末尾开始计数——如果 start < 0，则实际是 start + array.length。
如果省略 start 或 start < -array.length，则默认为 0。
如果 start >= array.length，则不会拷贝任何内容。

end

要复制的元素序列的结束位置，以 0 为起始的下标表示，且将被转换为整数。copyWithin 将会拷贝到该位置，但不包括 end 这个位置的元素。

负索引将从数组末尾开始计数——如果 end < 0，则实际是 end + array.length。
如果 end < -array.length，则使用0。
如果省略 end 或 end >= array.length，则默认为 array.length，这将导致直到数组末尾的所有元素都被复制。
如果 end 位于 start 之前，则不会拷贝任何内容。